<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  
  <!-- PWA Ã–zellikleri -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#667eea">
  
  <!-- SEO -->
  <meta name="description" content="Direksiyon Dersi Randevu Sistemi">
  <meta name="keywords" content="direksiyon dersi, randevu, ehliyet">
  
  <title>Direksiyon Dersi ProgramÄ±</title>
  <link rel="stylesheet" href="style.css">
  
  <!-- Firebase CDN -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

  <!-- PDF ve Excel KÃ¼tÃ¼phaneleri -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>
<body>
  <header>
    <h1>ğŸš— Direksiyon Dersi ProgramÄ±</h1>
    <div class="menu">
      <button id="ogrenciBtn" class="menu-btn active">ğŸ‘¨â€ğŸ“ Ã–ÄŸrenci</button>
      <button id="hocaBtn" class="menu-btn">ğŸ‘¨â€ğŸ« Hoca</button>
    </div>
  </header>

  <!-- ==================== Ã–ÄRENCÄ° PANELÄ° ==================== -->
  <section id="ogrenciPanel" class="panel">
    <!-- Ã–ÄŸrenci GiriÅŸ -->
    <div id="ogrenciLoginDiv">
      <h2>Ã–ÄŸrenci GiriÅŸi</h2>
      <form id="ogrenciLoginForm">
        <div class="form-group">
          <label>Ad Soyad:</label>
          <input 
            type="text" 
            id="loginAdSoyad" 
            required 
            placeholder="Ad Soyad (min. 3 karakter)"
            minlength="3"
            maxlength="100"
            pattern="[a-zA-ZÄŸÃ¼ÅŸÄ±Ã¶Ã§ÄÃœÅÄ°Ã–Ã‡\s]+"
            title="Ad en az 3 karakter olmalÄ± ve sadece harf iÃ§ermelidir"
          >
          <small style="color:#666; font-size:0.85rem; display:block; margin-top:4px;">
            âœ“ En az 3 karakter â€¢ Sadece harf
          </small>
        </div>
        
        <div class="form-group">
          <label>Telefon:</label>
          <input 
            type="tel" 
            id="loginTelefon" 
            required 
            placeholder="05XXXXXXXXX"
            pattern="05[0-9]{9}"
            maxlength="11"
            inputmode="numeric"
          >
          <small style="color:#666; font-size:0.85rem; display:block; margin-top:4px;">
            âœ“ 05 ile baÅŸlamalÄ± â€¢ 11 haneli
          </small>
        </div>
        
        <!-- Beni HatÄ±rla -->
        <div class="form-group" style="display:flex; align-items:center; gap:8px; margin-top:10px;">
          <input type="checkbox" id="beniHatirla" style="width:auto; margin:0;">
          <label for="beniHatirla" style="margin:0; cursor:pointer;">ğŸ”’ Beni HatÄ±rla</label>
        </div>
        
        <button type="submit" class="btn">GiriÅŸ Yap</button>
        
        <!-- FarklÄ± Hesap Butonu -->
        <button type="button" id="farkliHesapBtn" class="btn" style="background-color:#6c757d;">
          ğŸ”„ FarklÄ± Hesap
        </button>
      </form>
    </div>

    <!-- Ã–ÄŸrenci Form -->
    <div id="ogrenciFormDiv" style="display:none;">
      <h2>Uygun Saatlerini SeÃ§</h2>
      <form id="formUygunluk">
        <input type="hidden" id="duzenleIndex" value="-1">
        
        <div class="form-group">
          <label>Ad Soyad:</label>
          <input type="text" id="ogrenciAdi" readonly>
        </div>
        
        <div class="form-group">
          <label>Telefon:</label>
          <input type="tel" id="telefon" readonly>
        </div>
        
        <div class="form-group">
          <label>Uygun GÃ¼n:</label>
          <select id="gun">
            <option>Pazartesi</option>
            <option>SalÄ±</option>
            <option>Ã‡arÅŸamba</option>
            <option>PerÅŸembe</option>
            <option>Cuma</option>
            <option>Cumartesi</option>
          </select>
        </div>
        
        <div class="form-group">
          <label>Uygun Saat:</label>
          <select id="saat" required>
            <option value="08:00">08:00 - 08:50</option>
            <option value="09:00">09:00 - 09:50</option>
            <option value="10:00">10:00 - 10:50</option>
            <option value="11:00">11:00 - 11:50</option>
            <option value="13:00">13:00 - 13:50</option>
            <option value="14:00">14:00 - 14:50</option>
            <option value="15:00">15:00 - 15:50</option>
            <option value="16:00">16:00 - 16:50</option>
            <option value="17:00">17:00 - 17:50</option>
          </select>
        </div>
        
        <button type="submit" class="btn">ğŸ’¾ Kaydet</button>
      </form>

      <!-- BoÅŸ Saatleri GÃ¶ster -->
      <div style="margin-top: 15px;">
        <button type="button" id="bosSaatBtn" class="btn">ğŸ“… BoÅŸ Saatleri GÃ¶ster/Gizle</button>
        <div id="ogrenciBosSaatTablo" style="margin-top: 10px; display: none;"></div>
      </div>

      <!-- Kaydedilen Saatler -->
      <h3>Kaydedilen Saatler</h3>
      <div class="table-responsive">
        <table id="ogrenciTablo">
          <thead>
            <tr>
              <th>Ad Soyad</th>
              <th>Telefon</th>
              <th>GÃ¼n</th>
              <th>Saat</th>
              <th>Ä°ÅŸlem</th>
            </tr>
          </thead>
          <tbody id="ogrenciTabloVeri"></tbody>
        </table>
      </div>
    </div>
  </section>

  <!-- ==================== HOCA PANELÄ° ==================== -->
  <section id="hocaPanel" class="panel">
    <!-- Ã‡Ä±kÄ±ÅŸ Butonu -->
    <div id="hocaCikisDiv" style="display:none; text-align:right; margin-bottom:15px;">
      <button onclick="hocaCikisYap()" class="btn" style="background-color:#6c757d;">
        ğŸšª Ã‡Ä±kÄ±ÅŸ Yap
      </button>
    </div>
    
    <!-- Hoca GiriÅŸ -->
    <h2>Hoca GiriÅŸi</h2>
    <form id="hocaLoginForm">
      <div class="form-group">
        <label>Åifre:</label>
        <input type="password" id="sifre" required placeholder="Åifrenizi girin">
      </div>
      <button type="submit" class="btn">ğŸ” GiriÅŸ Yap</button>
    </form>

    <!-- Hoca Tablosu ve Ä°statistikler -->
    <div id="hocaTabloDiv" style="display:none; margin-top:20px;">
      <h3>ğŸ“Š Ã–ÄŸrenci ProgramÄ±</h3>
      
      <!-- Ä°statistikler -->
      <div id="istatistikler">
        <span id="toplamOgrenci">ğŸ“† Toplam Ã–ÄŸrenci: 0</span>
        <span id="enYogunGun">ğŸ§© En YoÄŸun GÃ¼n: -</span>
        <span id="bosSaatler">â° BoÅŸ Saatler: 0</span>
      </div>

      <!-- Ä°ndirme ButonlarÄ± -->
      <div class="butonlar">
        <button id="pdfBtn" class="btn">ğŸ“„ PDF Ä°ndir</button>
        <button id="excelBtn" class="btn">ğŸ“Š Excel Ä°ndir</button>
        <button onclick="tumKayitlariSil()" class="btn" style="background-color:#dc3545;">
          ğŸ—‘ï¸ TÃ¼m KayÄ±tlarÄ± Sil
        </button>
      </div>

      <!-- Arama -->
      <div style="margin-bottom:10px;">
        <input 
          type="text" 
          id="searchInput" 
          placeholder="ğŸ” GÃ¼n, Saat, Ã–ÄŸrenci veya Telefon ara..."
        >
      </div>

      <!-- BoÅŸ Saatleri GÃ¶ster -->
      <div id="hocaBosSaatDetay" style="margin-top:10px;">
        <button id="hocaBosSaatBtn" class="btn">ğŸ“… BoÅŸ Saatleri GÃ¶ster/Gizle</button>
        <ul id="hocaBosSaatListe" style="list-style:none; padding-left:0; display:none; margin-top:10px;"></ul>
        <div id="hocaBosSaatTablo" style="margin-top: 10px; display: none;"></div>
      </div>

      <!-- Hoca DÃ¼zenleme Formu -->
      <div id="hocaDuzenleFormDiv" style="display:none; margin-top:20px;">
        <h3>ğŸ“ Randevu DÃ¼zenle</h3>
        <form id="hocaDuzenleForm">
          <input type="hidden" id="hocaDuzenleIndex" value="-1">
          
          <div class="form-group">
            <label>Ã–ÄŸrenci AdÄ±:</label>
            <input type="text" id="hocaDuzenleOgrenci" readonly>
          </div>
          
          <div class="form-group">
            <label>Telefon:</label>
            <input type="text" id="hocaDuzenleTelefon" readonly>
          </div>
          
          <div class="form-group">
            <label>Yeni GÃ¼n:</label>
            <select id="hocaDuzenleGun" required>
              <option>Pazartesi</option>
              <option>SalÄ±</option>
              <option>Ã‡arÅŸamba</option>
              <option>PerÅŸembe</option> 
              <option>Cuma</option>
              <option>Cumartesi</option>
            </select>
          </div>
          
          <div class="form-group">
            <label>Yeni Saat:</label>
            <select id="hocaDuzenleSaat" required>
              <option value="08:00">08:00 - 08:50</option>
              <option value="09:00">09:00 - 09:50</option>
              <option value="10:00">10:00 - 10:50</option>
              <option value="11:00">11:00 - 11:50</option>
              <option value="13:00">13:00 - 13:50</option>
              <option value="14:00">14:00 - 14:50</option>
              <option value="15:00">15:00 - 15:50</option>
              <option value="16:00">16:00 - 16:50</option>
              <option value="17:00">17:00 - 17:50</option>
            </select>
          </div>
          
          <div style="display:flex; gap:10px; margin-top:15px; flex-wrap:wrap;">
            <button type="submit" class="btn" style="background-color:#4CAF50; flex:1;">
              âœ… GÃ¼ncelle
            </button>
            <button 
              type="button" 
              class="btn" 
              onclick="document.getElementById('hocaDuzenleFormDiv').style.display='none'" 
              style="background-color:#f44336; flex:1;"
            >
              âŒ Ä°ptal
            </button>
          </div>
        </form>
      </div>

      <!-- Ana Tablo -->
      <div class="table-responsive">
        <table id="tablo">
          <thead>
            <tr>
              <th>GÃ¼n</th>
              <th>Saat</th>
              <th>Ã–ÄŸrenci</th>
              <th>Telefon</th>
              <th>Ä°ÅŸlem</th>
            </tr>
          </thead>
          <tbody id="tabloVeri"></tbody>
        </table>
      </div>
    </div>
  </section>

  <script src="script.js"></script>
</body>
</html>
